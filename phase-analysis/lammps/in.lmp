# LAMMPS atomistic input script

echo		both
# --------------------------------------------------------------
# Variable definitions

variable        dump_freq equal 1000
variable	restart_flag equal 1

variable	seed1 equal 165497
variable        seed2 equal 984691
variable	nrmols equal 100

#variable	starttemp equal 425
#variable	filein	string start

variable        filein string production_noq_${starttemp}K
variable        fileout string production_noq_${starttemp}K_a
# --------------------------------------------------------------

units           real
atom_style      full
boundary        p p p


pair_style      lj/cut/coul/long 9.5 9.5
bond_style      harmonic
angle_style     harmonic
dihedral_style  opls
improper_style  cvff
pair_modify     mix geometric tail yes
special_bonds   lj/coul 0 0 0.5


if "${restart_flag} == 0" then &
        "read_data       ${filein}.lammps" &
else &
        "read_data 	${filein}.lammps" &

neigh_modify 	one 5000

# Interaction potential definition
include         oplsaa.param

molecule        molecule single.mol
region		cell block EDGE EDGE EDGE EDGE EDGE EDGE

if "${restart_flag} == 0" then &
 	"create_atoms    0 random ${nrmols} ${seed1} cell mol molecule ${seed2} overlap 1.5"

# Integration conditions (check)
timestep	1.0 
kspace_style 	pppm/cg 1e-4
dielectric	1.0 
fix		mom all momentum 100 linear 1 1 1 angular

# Equilibration
group		fixed_group type 7
set		group fixed_group charge 0.0

velocity        fixed_group set 0.0 0.0 0.0
fix             22 fixed_group setforce 0.0 0.0 0.0
group		mobile_group subtract all fixed_group
compute		myTemp mobile_group temp


thermo		${dump_freq}
thermo_style    custom step temp c_myTemp pe etotal press vol 

if "${restart_flag} == 0" then &
	"minimize        0.0 1.0e-8 1000 100000" &
	"velocity	mobile_group create ${starttemp} ${seed1} dist gaussian rot yes mom yes sum yes"


#region         myblock block EDGE EDGE EDGE EDGE $(zhi-20.0) EDGE
#fix            3 mobile_group deposit 10 0 100 29494 region myblock mol molecule 

# Integrator
fix		int mobile_group nvt temp ${starttemp} ${starttemp} 10.0

# Run conditions
dump		1 all custom ${dump_freq} ${fileout}.dump id type q x y z ix iy iz
run		1000000

write_data	${fileout}.lammps


